<csLoading *ngIf="!application"></csLoading>

<div *ngIf="application">

  <div class="btn-group btn-group-padded pull-left">

    <div class="btn-group" dropdown [(isOpen)]="status.isOpen">
      <button id="single-button" type="button" class="btn btn-info" dropdownToggle [disabled]="disabled">
        Currently: {{recommendationOptions.region}} <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
        <li role="menuitem"><a class="dropdown-item" (click)="changeRegion('US')">United States</a></li>
        <li role="menuitem"><a class="dropdown-item" (click)="changeRegion('EU')">Europe</a></li>
        <li role="menuitem"><a class="dropdown-item" (click)="changeRegion('ASIA')">Asia-Pacific</a></li>
        <li role="menuitem"><a class="dropdown-item" (click)="changeRegion('SA')">South America</a></li>
      </ul>
    </div>

  </div>

  <div class="btn-group btn-group-padded pull-right">

    <button [ngClass]="{'disabled': recommendation.isGenerating}" class="btn btn-primary" (click)="triggerRecommendation(application)">
      <i [ngClass]="{ 'fa-copy': !recommendation.isGenerating,
                      'fa-spin': recommendation.isGenerating,
                      'fa-circle-o-notch': recommendation.isGenerating}"
      class="fa"></i> 
      Generate Recommendation
    </button>

  </div>

  <div class="overflow-hidden">
    <div class="application-editor" [csConnection]="application">

      <cs-stove-editor-dependency-constraint
        *ngFor="let constraint of applicationData.links; let i = index"
        [constraint]="constraint"
        class="svg"
        >
      </cs-stove-editor-dependency-constraint>

      <cs-stove-editor-ingredient
        *ngFor="let ingredient of application.children; let i = index"
        [ingredient]="ingredient"
        [csPosition]="i"
        csDraggable>
      </cs-stove-editor-ingredient>

    </div>
  </div>

</div>
