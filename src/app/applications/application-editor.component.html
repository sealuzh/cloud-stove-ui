<csLoading *ngIf="!application"></csLoading>
<div *ngIf="application">
  <div class="btn-group btn-group-padded pull-right">
    <a (click)="retrieveRecommendation(application)">
      <button class="btn btn-primary">
        <i class="fa fa-file-text"></i> Recommendation
      </button>
    </a>

    <a (click)="triggerRecommendation(application)">
      <button class="btn btn-primary">
        <i class="fa fa-file-text"></i> Trigger
      </button>
    </a>
  </div>

  <div class="application-editor">
    <div id="ingredient-{{ingredient._id}}" class="ingredient noselect" *ngFor="let ingredient of application.children; let i = index" [csPosition]="i" csDraggable>
      <div class="content">

        <div class="edit">
          <a [routerLink]="['/ingredients/', ingredient.id]"><i class="fa fa-edit"></i></a>
        </div>

        <div class="details">
          {{ingredient.name}}
          <br>
          {{ingredient.constraints.length}} Constraints
        </div>

      </div>
      <div class="recommendation" [ngClass]="{'no-recommendation': !ingredient.recommendation}">
        <div *ngIf="ingredient.recommendation">
          {{ingredient.recommendation.provider}} {{ingredient.recommendation.name}}<br>
          {{ingredient.recommendation.cores}} Cores / {{ingredient.recommendation.mem_gb}}GB RAM
        </div>
        <div [hidden]="ingredient.recommendation">No recommendation yet.</div>
      </div>
    </div>
  </div>

</div>
